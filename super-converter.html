<!DOCTYPE html>
<html lang="en">

<head>
	<title>Super Converter</title>
</head>

<body>
	<div id="root"></div>

	<script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
	<script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
	<script src="https://unpkg.com/babel-standalone@6.26.0/babel.min.js"></script>

	<script type="text/babel">
		function MinutesToHours() {
			const [amount, setAmount] = React.useState(0);
			const [inverted, setInverted] = React.useState(false);
			const handleChange = (e) => setAmount(e.target.value);
			const handleReset = () => setAmount(0);
			const handleInvert = () => {
				if (inverted) {
					// 시간 -> 분
					setAmount((amount) => amount * 60);
				} else {
					// 분 -> 시간
					setAmount((amount) => amount / 60);
				}
				setInverted((curr) => !curr);
			};

			return (
				<div>
					<div>
						<label htmlFor="minutes">Minutes</label>
						<input
							id="minutes"
							placeholder="minutes"
							type="number"
							disabled={inverted}
							value={inverted ? amount * 60 : amount}
							onChange={handleChange}
						/>
					</div>
					<div>
						<label htmlFor="hours">Hours</label>
						<input
							id="hours"
							placeholder="hours"
							type="number"
							disabled={!inverted}
							value={inverted ? amount : amount / 60}
							onChange={handleChange}
						/>
					</div>
					<button onClick={handleReset}>Reset</button>
					<button onClick={handleInvert}>
						{inverted ? 'Turn back' : 'Invert'}
					</button>
				</div>
			);
		}

		function KmToMiles() {
			const [amount, setAmount] = React.useState(0);
			const [inverted, setInverted] = React.useState(false);
			const handleChange = (e) => setAmount(e.target.value);
			const handleReset = () => setAmount(0);
			const handleInvert = () => {
				if (inverted) {
					// Miles -> KM
					setAmount((amount) => amount * 1.6);
				} else {
					// KM -> Miles
					setAmount((amount) => amount / 1.6);
				}
				setInverted((curr) => !curr);
			};

			return (
				<div>
					<div>
						<label htmlFor="km">KM</label>
						<input
							id="km"
							placeholder="KM"
							type="number"
							disabled={inverted}
							value={inverted ? amount * 1.6 : amount}
							onChange={handleChange}
						/>
					</div>
					<div>
						<label htmlFor="miles">Miles</label>
						<input
							id="miles"
							placeholder="Miles"
							type="number"
							disabled={!inverted}
							value={inverted ? amount : amount / 1.6}
							onChange={handleChange}
						/>
					</div>
					<button onClick={handleReset}>Reset</button>
					<button onClick={handleInvert}>
						{inverted ? 'Turn back' : 'Invert'}
					</button>
				</div>
			);
		}

		const OPTIONS = {
			SELECT: 'select',
			MINUTES_TO_HOURS: 'minutes_to_hours',
			KM_TO_MILES: 'km_to_miles',
		}

		function App() {
			const [option, setOption] = React.useState(OPTIONS.SELECT);
			const handleSelect = (event) => {
				setOption(event.target.value);
			}
			return (
				<div>
					<h1>Super Converter</h1>
					<select value={option} onChange={handleSelect}>
						<option value={OPTIONS.SELECT}>select</option>
						<option value={OPTIONS.MINUTES_TO_HOURS}>Minutes & Hours</option>
						<option value={OPTIONS.KM_TO_MILES}>KM & Miles</option>
					</select>
					<hr />
					{option === OPTIONS.SELECT ? "Please select an option" : null}
					{option === OPTIONS.MINUTES_TO_HOURS ? <MinutesToHours /> : null}
					{option === OPTIONS.KM_TO_MILES ? <KmToMiles /> : null}
				</div>
			);
		}

		const root = document.getElementById('root');
		ReactDOM.render(<App />, root);
	</script>
</body>

</html>